name: arg-invoice-parser

services:
  invoice-parser-api:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: invoice-parser-api
    command: ["uv", "run", "invoice-api", "--host", "${HOST}", "--port", "${PORT}", "--log-level", "${LOG_LEVEL}"]
    ports:
      - "${PORT}:${PORT}"
    restart: unless-stopped
    healthcheck:
      test: ["CMD-SHELL", "curl -f http://localhost:${PORT}/health || exit 1"]
      interval: 1m30s
      timeout: 10s
      retries: 3
      start_period: 40s